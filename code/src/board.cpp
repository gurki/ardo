#include "board.h"

#include <random>


////////////////////////////////////////////////////////////////////////////////
Board::Board(const int width,
             const int height,
             const int nballs)
{
    init(width, height);
    initBallsRandom(nballs);
    
    _playerId = 0;
}


////////////////////////////////////////////////////////////////////////////////
void Board::init(const int width,
                 const int height)
{
    _balls.clear();
    _width = width;
    _height = height;
}


////////////////////////////////////////////////////////////////////////////////
void Board::initBallsRandom(const int nballs)
{
    _balls.clear();
    
    //  keep spwaning random balls until we have enough
    while (_balls.size() <= nballs)
    {
        vec2i pos;
        pos.x = rand() % _width;
        pos.y = rand() % _height;
        
        //  only add ball if position is free
        if (_balls.find(pos) != _balls.end()) {
            _balls.insert(pos);
        }
    }
}


////////////////////////////////////////////////////////////////////////////////
void Board::movePlayerRight() { _playerId++; }


////////////////////////////////////////////////////////////////////////////////
void Board::movePlayerLeft() { _playerId--; }


////////////////////////////////////////////////////////////////////////////////
void Board::shoot() {}


////////////////////////////////////////////////////////////////////////////////
Board::Side Board::getPlayerSide()
{
    return South;
}


////////////////////////////////////////////////////////////////////////////////
int Board::getPlayerPosition()
{
    return 0;
}


////////////////////////////////////////////////////////////////////////////////
vector<vec2i> Board::getPath()
{
    return vector<vec2i>();
}